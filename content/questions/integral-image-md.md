---
filename: integral-image.md
title: Интегральные изображения. Метод подсчёта среднего в прямоугольной области.
Summary: Интегральное представление изображения — это матрица, размерность
  которой совпадает с размерностью исходного изображения.
date: 2022-01-09T19:41:17.107Z
билеты: Билет 6
draft: false
weight: 16
author: Sergey
cover:
  image: https://robocraft.ru/files/opencv/IntegralImage2.png
---
## Интегральные изображения

### Интегральное изображение

Интегральное представление изображения — это матрица, размерность которой совпадает с размерностью исходного изображения. Элементы этой матрицы рассчитываются по формуле:

II - интегральное изображение, I обычное изображение

II(x,y) = Summ( I(i,j) )
, где I(i,j) — яркость пикселя исходного изображения.
Т.о., каждый элемент интегрального изображения II\[x,y] содержит в себе сумму пикселей изображения в прямоугольнике от (0,0) до (x,y).

Рассчет интегрального изображения занимает линейное время, пропорциональное числу пикселей исходного изображении.

**Применение**

Интегральное изображение использутся для быстрого вычисления яркости заданных участков изображения ( в вейвлет-преобразованиях, фильтрах Хаара, рассчёте дескрипторов (SURF)).

### Метод подсчета среднего в прямоугольной области

Одной из полезнейших особенностей интегрального представления является возможность очень быстро вычислить сумму пикселей произвольного прямоугольника (или любой другой фигуры, которую можно аппроксимировать несколькими прямоугольниками).

«Наивный»(последовательное сложение) алгоритм подсчета суммы элементов изображения обладает временной сложностью O(M\*N) и сложностью по памяти O(1). Интегральное изображение позволяет совершать те же вычисления за время O(1) и обладает сложностью по памяти O(M\*N).

{{< figure src="https://habrastorage.org/r/w1560/webt/_f/dp/ap/_fdpapnp5qlfd1e7uwv1hkqd614.png" class="figure__image" >}}

Значения в клетках правго квадрата получились суммированием снизу вверх и слева направо, нижележащих и леволежащих элементов первого квадрата.

Ну и чтобы получить среднее значение, разделим полученную сумму на количество элементов в прямоугольной области.